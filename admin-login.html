<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Admin Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" type="image/png" sizes="32x32" href="iconofile.png">
  <!-- CSS -->
  <link rel="stylesheet" href="login.css" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>

  <div class="login-container">
    <div class="login-card">
      <h1>Panel Administrativo</h1>
      <p>Acceso restringido</p>

      <input id="email" type="email" placeholder="Correo electrónico" />
      <input id="password" type="password" placeholder="Contraseña" />

      <button id="loginBtn">Entrar</button>

      <span id="errorMsg"></span>
    </div>
  </div>

  <script>
  // Usa la configuración real de tu proyecto
  const firebaseConfig = {
    apiKey: "AIzaSyAWta7DENSCSb-DN8OcKGa6uAbTbUYJhVg",
    authDomain: "applebesapp.firebaseapp.com",
    databaseURL: "https://applebesapp-default-rtdb.firebaseio.com",
    projectId: "applebesapp",
    storageBucket: "applebesapp.firebasestorage.app",
    messagingSenderId: "83305456668",
    appId: "1:83305456668:web:3dfcfdd4eb2b6cb8982bd9"
  };

  // Inicializar Firebase
  firebase.initializeApp(firebaseConfig);

  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const errorMsg = document.getElementById("errorMsg");
  const loginBtn = document.getElementById("loginBtn");

  loginBtn.onclick = async () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if (!email || !password) {
      errorMsg.textContent = "Por favor, completa todos los campos.";
      return;
    }

    loginBtn.disabled = true;
    loginBtn.textContent = "Cargando...";
    errorMsg.textContent = "";

    try {
      // Intento de inicio de sesión
      await firebase.auth().signInWithEmailAndPassword(email, password);
      
      // Si tiene éxito, redirigir
      window.location.href = "admin-live.html";
    } catch (err) {
      console.error(err);
      loginBtn.disabled = false;
      loginBtn.textContent = "Entrar";
      
      // Mensajes de error amigables
      if (err.code === 'auth/user-not-found' || err.code === 'auth/wrong-password') {
        errorMsg.textContent = "Usuario o contraseña incorrectos.";
      } else {
        errorMsg.textContent = "Error al acceder. Intenta de nuevo.";
      }
    }
  };
</script>

</body>
</html>
